{"ast":null,"code":"var _jsxFileName = \"D:\\\\user\\\\CFBF-main\\\\blood-donation-management\\\\client\\\\src\\\\components\\\\ui\\\\Map.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { MapPin, Navigation, Search, Maximize2, Minimize2 } from 'lucide-react';\nimport Button from './Button';\nimport Input from './Input';\nimport Card from './Card';\nimport logger from '../../utils/logger';\n\n// Fix for default markers in Leaflet\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'\n});\nconst Map = ({\n  center = [28.6139, 77.2090],\n  // Default to Delhi\n  zoom = 10,\n  height = '400px',\n  markers = [],\n  onLocationSelect,\n  onMarkerClick,\n  showSearch = true,\n  showControls = true,\n  showCurrentLocation = true,\n  interactive = true,\n  className = '',\n  style = {}\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef([]);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [currentLocation, setCurrentLocation] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n  useEffect(() => {\n    if (!mapRef.current) return;\n\n    // Initialize map\n    const map = L.map(mapRef.current, {\n      center: center,\n      zoom: zoom,\n      zoomControl: false,\n      attributionControl: true\n    });\n\n    // Add OpenStreetMap tile layer\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '© <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n      maxZoom: 19\n    }).addTo(map);\n\n    // Add zoom control to top-right\n    if (showControls) {\n      L.control.zoom({\n        position: 'topright'\n      }).addTo(map);\n    }\n\n    // Add scale control\n    L.control.scale({\n      position: 'bottomleft'\n    }).addTo(map);\n    mapInstanceRef.current = map;\n\n    // Add click handler for location selection\n    if (onLocationSelect && interactive) {\n      map.on('click', e => {\n        const {\n          lat,\n          lng\n        } = e.latlng;\n        onLocationSelect({\n          latitude: lat,\n          longitude: lng\n        });\n        logger.ui('CLICK', 'MapLocationSelect', {\n          lat,\n          lng\n        }, 'MAP_COMPONENT');\n      });\n    }\n\n    // Get current location if enabled\n    if (showCurrentLocation) {\n      getCurrentLocation();\n    }\n    logger.componentMount('Map');\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.remove();\n        mapInstanceRef.current = null;\n      }\n      logger.componentUnmount('Map');\n    };\n  }, []);\n\n  // Update markers when markers prop changes\n  useEffect(() => {\n    if (!mapInstanceRef.current) return;\n\n    // Clear existing markers\n    markersRef.current.forEach(marker => {\n      mapInstanceRef.current.removeLayer(marker);\n    });\n    markersRef.current = [];\n\n    // Add new markers\n    markers.forEach(markerData => {\n      const marker = createMarker(markerData);\n      if (marker) {\n        marker.addTo(mapInstanceRef.current);\n        markersRef.current.push(marker);\n      }\n    });\n\n    // Fit bounds to show all markers if there are any\n    if (markers.length > 0) {\n      const group = new L.featureGroup(markersRef.current);\n      mapInstanceRef.current.fitBounds(group.getBounds().pad(0.1));\n    }\n  }, [markers]);\n\n  // Update map center when center prop changes\n  useEffect(() => {\n    if (mapInstanceRef.current && center) {\n      mapInstanceRef.current.setView(center, zoom);\n    }\n  }, [center, zoom]);\n  const createMarker = markerData => {\n    try {\n      const {\n        position,\n        title,\n        description,\n        type = 'default',\n        icon,\n        color = '#dc2626'\n      } = markerData;\n      if (!position || !Array.isArray(position) || position.length !== 2) {\n        logger.warn('Invalid marker position', 'MAP_COMPONENT', markerData);\n        return null;\n      }\n\n      // Create custom icon based on type\n      let markerIcon;\n      if (icon) {\n        markerIcon = L.divIcon({\n          html: `<div class=\"custom-marker\" style=\"background-color: ${color};\">${icon}</div>`,\n          className: 'custom-div-icon',\n          iconSize: [30, 30],\n          iconAnchor: [15, 30]\n        });\n      } else {\n        // Use different colors for different types\n        const typeColors = {\n          hospital: '#dc2626',\n          donor: '#16a34a',\n          request: '#ea580c',\n          bloodbank: '#2563eb',\n          default: '#6b7280'\n        };\n        markerIcon = L.divIcon({\n          html: `<div class=\"marker-pin\" style=\"background-color: ${typeColors[type] || color};\"></div>`,\n          className: 'custom-div-icon',\n          iconSize: [25, 35],\n          iconAnchor: [12, 35]\n        });\n      }\n      const marker = L.marker(position, {\n        icon: markerIcon\n      });\n\n      // Add popup if title or description provided\n      if (title || description) {\n        const popupContent = `\n          <div class=\"marker-popup\">\n            ${title ? `<h3 class=\"popup-title\">${title}</h3>` : ''}\n            ${description ? `<p class=\"popup-description\">${description}</p>` : ''}\n          </div>\n        `;\n        marker.bindPopup(popupContent);\n      }\n\n      // Add click handler\n      if (onMarkerClick) {\n        marker.on('click', () => {\n          onMarkerClick(markerData);\n          logger.ui('CLICK', 'MapMarker', {\n            type,\n            title\n          }, 'MAP_COMPONENT');\n        });\n      }\n      return marker;\n    } catch (error) {\n      logger.error('Error creating marker', 'MAP_COMPONENT', error);\n      return null;\n    }\n  };\n  const getCurrentLocation = () => {\n    if (!navigator.geolocation) {\n      logger.warn('Geolocation not supported', 'MAP_COMPONENT');\n      return;\n    }\n    navigator.geolocation.getCurrentPosition(position => {\n      const {\n        latitude,\n        longitude\n      } = position.coords;\n      setCurrentLocation([latitude, longitude]);\n      if (mapInstanceRef.current) {\n        // Add current location marker\n        const currentLocationMarker = L.marker([latitude, longitude], {\n          icon: L.divIcon({\n            html: '<div class=\"current-location-marker\"></div>',\n            className: 'current-location-icon',\n            iconSize: [20, 20],\n            iconAnchor: [10, 10]\n          })\n        });\n        currentLocationMarker.addTo(mapInstanceRef.current);\n        currentLocationMarker.bindPopup('Your current location');\n        markersRef.current.push(currentLocationMarker);\n      }\n      logger.success('Current location obtained', 'MAP_COMPONENT');\n    }, error => {\n      logger.warn('Failed to get current location', 'MAP_COMPONENT', error);\n    }, {\n      enableHighAccuracy: true,\n      timeout: 10000,\n      maximumAge: 300000 // 5 minutes\n    });\n  };\n  const handleSearch = async query => {\n    if (!query.trim()) {\n      setSearchResults([]);\n      return;\n    }\n    setIsSearching(true);\n    try {\n      // Use Nominatim API for geocoding\n      const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5&countrycodes=in`);\n      const results = await response.json();\n      const formattedResults = results.map(result => ({\n        id: result.place_id,\n        name: result.display_name,\n        latitude: parseFloat(result.lat),\n        longitude: parseFloat(result.lon),\n        type: result.type,\n        importance: result.importance\n      }));\n      setSearchResults(formattedResults);\n      logger.success(`Found ${formattedResults.length} search results`, 'MAP_COMPONENT');\n    } catch (error) {\n      logger.error('Error searching locations', 'MAP_COMPONENT', error);\n      setSearchResults([]);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n  const handleSearchSelect = result => {\n    if (mapInstanceRef.current) {\n      mapInstanceRef.current.setView([result.latitude, result.longitude], 15);\n      if (onLocationSelect) {\n        onLocationSelect({\n          latitude: result.latitude,\n          longitude: result.longitude,\n          name: result.name\n        });\n      }\n    }\n    setSearchResults([]);\n    setSearchQuery('');\n  };\n  const toggleFullscreen = () => {\n    setIsFullscreen(!isFullscreen);\n\n    // Trigger map resize after fullscreen toggle\n    setTimeout(() => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.invalidateSize();\n      }\n    }, 100);\n  };\n  const centerOnCurrentLocation = () => {\n    if (currentLocation && mapInstanceRef.current) {\n      mapInstanceRef.current.setView(currentLocation, 15);\n    } else {\n      getCurrentLocation();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    initial: {\n      opacity: 0,\n      y: 20\n    },\n    animate: {\n      opacity: 1,\n      y: 0\n    },\n    className: `relative ${isFullscreen ? 'fixed inset-0 z-50 bg-white dark:bg-slate-900' : ''} ${className}`,\n    style: style,\n    children: [showSearch && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-4 left-4 right-4 z-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative\",\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          icon: Search,\n          placeholder: \"Search for locations...\",\n          value: searchQuery,\n          onChange: e => {\n            setSearchQuery(e.target.value);\n            handleSearch(e.target.value);\n          },\n          className: \"bg-white dark:bg-slate-800 shadow-lg\",\n          loading: isSearching\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this), searchResults.length > 0 && /*#__PURE__*/_jsxDEV(Card, {\n          className: \"absolute top-full mt-2 w-full max-h-60 overflow-y-auto shadow-lg z-20\",\n          children: searchResults.map(result => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-3 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer border-b border-slate-200 dark:border-slate-600 last:border-b-0\",\n            onClick: () => handleSearchSelect(result),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(MapPin, {\n                className: \"h-4 w-4 text-slate-500 mt-1 flex-shrink-0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 min-w-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-medium text-slate-900 dark:text-white truncate\",\n                  children: result.name.split(',')[0]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-slate-600 dark:text-slate-400 truncate\",\n                  children: result.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 21\n            }, this)\n          }, result.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 9\n    }, this), showControls && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-4 right-4 z-10 flex flex-col space-y-2\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outline\",\n        size: \"sm\",\n        onClick: toggleFullscreen,\n        className: \"bg-white dark:bg-slate-800 shadow-lg\",\n        children: isFullscreen ? /*#__PURE__*/_jsxDEV(Minimize2, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(Maximize2, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 65\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 11\n      }, this), showCurrentLocation && /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outline\",\n        size: \"sm\",\n        onClick: centerOnCurrentLocation,\n        className: \"bg-white dark:bg-slate-800 shadow-lg\",\n        children: /*#__PURE__*/_jsxDEV(Navigation, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      className: \"w-full rounded-lg overflow-hidden\",\n      style: {\n        height: isFullscreen ? '100vh' : height,\n        minHeight: '300px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        .custom-div-icon {\n          background: transparent;\n          border: none;\n        }\n        \n        .marker-pin {\n          width: 25px;\n          height: 35px;\n          border-radius: 50% 50% 50% 0;\n          position: relative;\n          transform: rotate(-45deg);\n          border: 2px solid white;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n        }\n        \n        .marker-pin::after {\n          content: '';\n          width: 8px;\n          height: 8px;\n          margin: 6px 0 0 6px;\n          background: white;\n          position: absolute;\n          border-radius: 50%;\n        }\n        \n        .current-location-marker {\n          width: 20px;\n          height: 20px;\n          background: #3b82f6;\n          border: 3px solid white;\n          border-radius: 50%;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n          animation: pulse 2s infinite;\n        }\n        \n        @keyframes pulse {\n          0% {\n            box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);\n          }\n          70% {\n            box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);\n          }\n          100% {\n            box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);\n          }\n        }\n        \n        .custom-marker {\n          width: 30px;\n          height: 30px;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-weight: bold;\n          border: 2px solid white;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n        }\n        \n        .marker-popup {\n          min-width: 200px;\n        }\n        \n        .popup-title {\n          font-size: 14px;\n          font-weight: 600;\n          margin: 0 0 8px 0;\n          color: #1f2937;\n        }\n        \n        .popup-description {\n          font-size: 12px;\n          margin: 0;\n          color: #6b7280;\n          line-height: 1.4;\n        }\n        \n        .leaflet-popup-content-wrapper {\n          border-radius: 8px;\n          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n        }\n        \n        .leaflet-popup-tip {\n          box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 316,\n    columnNumber: 5\n  }, this);\n};\n_s(Map, \"ZS8D1yDaB5eU28sblf99v0PU+Ks=\");\n_c = Map;\nexport default Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useEffect","useRef","useState","motion","L","MapPin","Navigation","Search","Maximize2","Minimize2","Button","Input","Card","logger","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","Map","center","zoom","height","markers","onLocationSelect","onMarkerClick","showSearch","showControls","showCurrentLocation","interactive","className","style","_s","mapRef","mapInstanceRef","markersRef","isFullscreen","setIsFullscreen","currentLocation","setCurrentLocation","searchQuery","setSearchQuery","searchResults","setSearchResults","isSearching","setIsSearching","current","map","zoomControl","attributionControl","tileLayer","attribution","maxZoom","addTo","control","position","scale","on","e","lat","lng","latlng","latitude","longitude","ui","getCurrentLocation","componentMount","remove","componentUnmount","forEach","marker","removeLayer","markerData","createMarker","push","length","group","featureGroup","fitBounds","getBounds","pad","setView","title","description","type","icon","color","Array","isArray","warn","markerIcon","divIcon","html","iconSize","iconAnchor","typeColors","hospital","donor","request","bloodbank","default","popupContent","bindPopup","error","navigator","geolocation","getCurrentPosition","coords","currentLocationMarker","success","enableHighAccuracy","timeout","maximumAge","handleSearch","query","trim","response","fetch","encodeURIComponent","results","json","formattedResults","result","id","place_id","name","display_name","parseFloat","lon","importance","handleSearchSelect","toggleFullscreen","setTimeout","invalidateSize","centerOnCurrentLocation","div","initial","opacity","y","animate","children","placeholder","value","onChange","target","loading","fileName","_jsxFileName","lineNumber","columnNumber","onClick","split","variant","size","ref","minHeight","jsx","_c","$RefreshReg$"],"sources":["D:/user/CFBF-main/blood-donation-management/client/src/components/ui/Map.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { MapPin, Navigation, Search, Maximize2, Minimize2 } from 'lucide-react';\n\nimport Button from './Button';\nimport Input from './Input';\nimport Card from './Card';\nimport logger from '../../utils/logger';\n\n// Fix for default markers in Leaflet\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n});\n\nconst Map = ({\n  center = [28.6139, 77.2090], // Default to Delhi\n  zoom = 10,\n  height = '400px',\n  markers = [],\n  onLocationSelect,\n  onMarkerClick,\n  showSearch = true,\n  showControls = true,\n  showCurrentLocation = true,\n  interactive = true,\n  className = '',\n  style = {}\n}) => {\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef([]);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [currentLocation, setCurrentLocation] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n\n  useEffect(() => {\n    if (!mapRef.current) return;\n\n    // Initialize map\n    const map = L.map(mapRef.current, {\n      center: center,\n      zoom: zoom,\n      zoomControl: false,\n      attributionControl: true\n    });\n\n    // Add OpenStreetMap tile layer\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '© <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n      maxZoom: 19\n    }).addTo(map);\n\n    // Add zoom control to top-right\n    if (showControls) {\n      L.control.zoom({\n        position: 'topright'\n      }).addTo(map);\n    }\n\n    // Add scale control\n    L.control.scale({\n      position: 'bottomleft'\n    }).addTo(map);\n\n    mapInstanceRef.current = map;\n\n    // Add click handler for location selection\n    if (onLocationSelect && interactive) {\n      map.on('click', (e) => {\n        const { lat, lng } = e.latlng;\n        onLocationSelect({ latitude: lat, longitude: lng });\n        logger.ui('CLICK', 'MapLocationSelect', { lat, lng }, 'MAP_COMPONENT');\n      });\n    }\n\n    // Get current location if enabled\n    if (showCurrentLocation) {\n      getCurrentLocation();\n    }\n\n    logger.componentMount('Map');\n\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.remove();\n        mapInstanceRef.current = null;\n      }\n      logger.componentUnmount('Map');\n    };\n  }, []);\n\n  // Update markers when markers prop changes\n  useEffect(() => {\n    if (!mapInstanceRef.current) return;\n\n    // Clear existing markers\n    markersRef.current.forEach(marker => {\n      mapInstanceRef.current.removeLayer(marker);\n    });\n    markersRef.current = [];\n\n    // Add new markers\n    markers.forEach(markerData => {\n      const marker = createMarker(markerData);\n      if (marker) {\n        marker.addTo(mapInstanceRef.current);\n        markersRef.current.push(marker);\n      }\n    });\n\n    // Fit bounds to show all markers if there are any\n    if (markers.length > 0) {\n      const group = new L.featureGroup(markersRef.current);\n      mapInstanceRef.current.fitBounds(group.getBounds().pad(0.1));\n    }\n  }, [markers]);\n\n  // Update map center when center prop changes\n  useEffect(() => {\n    if (mapInstanceRef.current && center) {\n      mapInstanceRef.current.setView(center, zoom);\n    }\n  }, [center, zoom]);\n\n  const createMarker = (markerData) => {\n    try {\n      const {\n        position,\n        title,\n        description,\n        type = 'default',\n        icon,\n        color = '#dc2626'\n      } = markerData;\n\n      if (!position || !Array.isArray(position) || position.length !== 2) {\n        logger.warn('Invalid marker position', 'MAP_COMPONENT', markerData);\n        return null;\n      }\n\n      // Create custom icon based on type\n      let markerIcon;\n      \n      if (icon) {\n        markerIcon = L.divIcon({\n          html: `<div class=\"custom-marker\" style=\"background-color: ${color};\">${icon}</div>`,\n          className: 'custom-div-icon',\n          iconSize: [30, 30],\n          iconAnchor: [15, 30]\n        });\n      } else {\n        // Use different colors for different types\n        const typeColors = {\n          hospital: '#dc2626',\n          donor: '#16a34a',\n          request: '#ea580c',\n          bloodbank: '#2563eb',\n          default: '#6b7280'\n        };\n\n        markerIcon = L.divIcon({\n          html: `<div class=\"marker-pin\" style=\"background-color: ${typeColors[type] || color};\"></div>`,\n          className: 'custom-div-icon',\n          iconSize: [25, 35],\n          iconAnchor: [12, 35]\n        });\n      }\n\n      const marker = L.marker(position, { icon: markerIcon });\n\n      // Add popup if title or description provided\n      if (title || description) {\n        const popupContent = `\n          <div class=\"marker-popup\">\n            ${title ? `<h3 class=\"popup-title\">${title}</h3>` : ''}\n            ${description ? `<p class=\"popup-description\">${description}</p>` : ''}\n          </div>\n        `;\n        marker.bindPopup(popupContent);\n      }\n\n      // Add click handler\n      if (onMarkerClick) {\n        marker.on('click', () => {\n          onMarkerClick(markerData);\n          logger.ui('CLICK', 'MapMarker', { type, title }, 'MAP_COMPONENT');\n        });\n      }\n\n      return marker;\n    } catch (error) {\n      logger.error('Error creating marker', 'MAP_COMPONENT', error);\n      return null;\n    }\n  };\n\n  const getCurrentLocation = () => {\n    if (!navigator.geolocation) {\n      logger.warn('Geolocation not supported', 'MAP_COMPONENT');\n      return;\n    }\n\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        const { latitude, longitude } = position.coords;\n        setCurrentLocation([latitude, longitude]);\n\n        if (mapInstanceRef.current) {\n          // Add current location marker\n          const currentLocationMarker = L.marker([latitude, longitude], {\n            icon: L.divIcon({\n              html: '<div class=\"current-location-marker\"></div>',\n              className: 'current-location-icon',\n              iconSize: [20, 20],\n              iconAnchor: [10, 10]\n            })\n          });\n\n          currentLocationMarker.addTo(mapInstanceRef.current);\n          currentLocationMarker.bindPopup('Your current location');\n          markersRef.current.push(currentLocationMarker);\n        }\n\n        logger.success('Current location obtained', 'MAP_COMPONENT');\n      },\n      (error) => {\n        logger.warn('Failed to get current location', 'MAP_COMPONENT', error);\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 10000,\n        maximumAge: 300000 // 5 minutes\n      }\n    );\n  };\n\n  const handleSearch = async (query) => {\n    if (!query.trim()) {\n      setSearchResults([]);\n      return;\n    }\n\n    setIsSearching(true);\n    \n    try {\n      // Use Nominatim API for geocoding\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5&countrycodes=in`\n      );\n      \n      const results = await response.json();\n      \n      const formattedResults = results.map(result => ({\n        id: result.place_id,\n        name: result.display_name,\n        latitude: parseFloat(result.lat),\n        longitude: parseFloat(result.lon),\n        type: result.type,\n        importance: result.importance\n      }));\n\n      setSearchResults(formattedResults);\n      logger.success(`Found ${formattedResults.length} search results`, 'MAP_COMPONENT');\n    } catch (error) {\n      logger.error('Error searching locations', 'MAP_COMPONENT', error);\n      setSearchResults([]);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n\n  const handleSearchSelect = (result) => {\n    if (mapInstanceRef.current) {\n      mapInstanceRef.current.setView([result.latitude, result.longitude], 15);\n      \n      if (onLocationSelect) {\n        onLocationSelect({\n          latitude: result.latitude,\n          longitude: result.longitude,\n          name: result.name\n        });\n      }\n    }\n    \n    setSearchResults([]);\n    setSearchQuery('');\n  };\n\n  const toggleFullscreen = () => {\n    setIsFullscreen(!isFullscreen);\n    \n    // Trigger map resize after fullscreen toggle\n    setTimeout(() => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.invalidateSize();\n      }\n    }, 100);\n  };\n\n  const centerOnCurrentLocation = () => {\n    if (currentLocation && mapInstanceRef.current) {\n      mapInstanceRef.current.setView(currentLocation, 15);\n    } else {\n      getCurrentLocation();\n    }\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className={`relative ${isFullscreen ? 'fixed inset-0 z-50 bg-white dark:bg-slate-900' : ''} ${className}`}\n      style={style}\n    >\n      {/* Search Bar */}\n      {showSearch && (\n        <div className=\"absolute top-4 left-4 right-4 z-10\">\n          <div className=\"relative\">\n            <Input\n              icon={Search}\n              placeholder=\"Search for locations...\"\n              value={searchQuery}\n              onChange={(e) => {\n                setSearchQuery(e.target.value);\n                handleSearch(e.target.value);\n              }}\n              className=\"bg-white dark:bg-slate-800 shadow-lg\"\n              loading={isSearching}\n            />\n            \n            {/* Search Results */}\n            {searchResults.length > 0 && (\n              <Card className=\"absolute top-full mt-2 w-full max-h-60 overflow-y-auto shadow-lg z-20\">\n                {searchResults.map((result) => (\n                  <div\n                    key={result.id}\n                    className=\"p-3 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer border-b border-slate-200 dark:border-slate-600 last:border-b-0\"\n                    onClick={() => handleSearchSelect(result)}\n                  >\n                    <div className=\"flex items-start space-x-3\">\n                      <MapPin className=\"h-4 w-4 text-slate-500 mt-1 flex-shrink-0\" />\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-sm font-medium text-slate-900 dark:text-white truncate\">\n                          {result.name.split(',')[0]}\n                        </p>\n                        <p className=\"text-xs text-slate-600 dark:text-slate-400 truncate\">\n                          {result.name}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </Card>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Map Controls */}\n      {showControls && (\n        <div className=\"absolute top-4 right-4 z-10 flex flex-col space-y-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={toggleFullscreen}\n            className=\"bg-white dark:bg-slate-800 shadow-lg\"\n          >\n            {isFullscreen ? <Minimize2 className=\"h-4 w-4\" /> : <Maximize2 className=\"h-4 w-4\" />}\n          </Button>\n          \n          {showCurrentLocation && (\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={centerOnCurrentLocation}\n              className=\"bg-white dark:bg-slate-800 shadow-lg\"\n            >\n              <Navigation className=\"h-4 w-4\" />\n            </Button>\n          )}\n        </div>\n      )}\n\n      {/* Map Container */}\n      <div\n        ref={mapRef}\n        className=\"w-full rounded-lg overflow-hidden\"\n        style={{ \n          height: isFullscreen ? '100vh' : height,\n          minHeight: '300px'\n        }}\n      />\n\n      {/* Custom Styles */}\n      <style jsx>{`\n        .custom-div-icon {\n          background: transparent;\n          border: none;\n        }\n        \n        .marker-pin {\n          width: 25px;\n          height: 35px;\n          border-radius: 50% 50% 50% 0;\n          position: relative;\n          transform: rotate(-45deg);\n          border: 2px solid white;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n        }\n        \n        .marker-pin::after {\n          content: '';\n          width: 8px;\n          height: 8px;\n          margin: 6px 0 0 6px;\n          background: white;\n          position: absolute;\n          border-radius: 50%;\n        }\n        \n        .current-location-marker {\n          width: 20px;\n          height: 20px;\n          background: #3b82f6;\n          border: 3px solid white;\n          border-radius: 50%;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n          animation: pulse 2s infinite;\n        }\n        \n        @keyframes pulse {\n          0% {\n            box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);\n          }\n          70% {\n            box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);\n          }\n          100% {\n            box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);\n          }\n        }\n        \n        .custom-marker {\n          width: 30px;\n          height: 30px;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-weight: bold;\n          border: 2px solid white;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n        }\n        \n        .marker-popup {\n          min-width: 200px;\n        }\n        \n        .popup-title {\n          font-size: 14px;\n          font-weight: 600;\n          margin: 0 0 8px 0;\n          color: #1f2937;\n        }\n        \n        .popup-description {\n          font-size: 12px;\n          margin: 0;\n          color: #6b7280;\n          line-height: 1.4;\n        }\n        \n        .leaflet-popup-content-wrapper {\n          border-radius: 8px;\n          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n        }\n        \n        .leaflet-popup-tip {\n          box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n        }\n      `}</style>\n    </motion.div>\n  );\n};\n\nexport default Map;"],"mappings":"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MAAM,EAAEc,YAAY,GAAG,OAAO,GAAGd,MAAM;QACvCqI,SAAS,EAAE;MACb;IAAE;MAAAT,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGF3I,OAAA;MAAOkJ,GAAG;MAAAhB,QAAA,EAAE;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAAO;MAAAM,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEjB,CAAC;AAACrH,EAAA,CAxdIb,GAAG;AAAA0I,EAAA,GAAH1I,GAAG;AA0dT,eAAeA,GAAG;AAAC,IAAA0I,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}